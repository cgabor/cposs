import os

def addcommand(command):
	commands[len(commands)]=command

def docommand(command):
	print command
	os.system(command)

commands={}
addcommand("intltool-extract --type=gettext/glade -l glade/settings.glade")
addcommand("intltool-extract --type=gettext/glade -l glade/home.glade")
addcommand("intltool-extract --type=gettext/glade -l glade/sales.glade")
addcommand("intltool-extract --type=gettext/glade -l glade/main.glade")
addcommand("intltool-extract --type=gettext/glade -l glade/common.glade")
addcommand("xgettext --language=Python --keyword=_ --keyword=N_ --output=data/languages/cposs.pot main.py view/home.py view/sales.py view/settings.py tmp/main.glade.h tmp/settings.glade.h tmp/home.glade.h tmp/sales.glade.h tmp/common.glade.h")

addcommand("msginit --input=data/languages/cposs.pot --locale=en_CA --output-file=data/languages/en_CA.po")
addcommand("msginit --input=data/languages/cposs.pot --locale=en_GB --output-file=data/languages/en_GB.po")
addcommand("msgmerge -U data/languages/en_CA.po data/languages/cposs.pot")
addcommand("msgmerge -U data/languages/en_GB.po data/languages/cposs.pot")


addcommand("mkdir -p data/languages/en_CA/LC_MESSAGES")
addcommand("mkdir -p data/languages/en_GB/LC_MESSAGES")

addcommand("msgfmt --output-file=data/languages/en_CA/LC_MESSAGES/cposs.mo data/languages/en_CA.po")
addcommand("msgfmt --output-file=data/languages/en_GB/LC_MESSAGES/cposs.mo data/languages/en_GB.po")

addcommand("rm -R tmp")

for key,command in commands.iteritems():
	docommand(command)
	
